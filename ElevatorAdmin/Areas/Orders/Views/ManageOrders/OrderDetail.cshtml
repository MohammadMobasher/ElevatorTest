@model List<DataLayer.Entities.ShopProduct>
@using DataLayer.Entities
@using DataLayer.ViewModels.Products
@using DNTPersianUtils.Core
@{
    ViewData["Title"] = "لیست سفارشات";
    var userInfo = ViewBag.UserInfo as DataLayer.Entities.Users.Users;
    var order = ViewBag.Order as ShopOrder;
    var address = ViewBag.UserAddress as UserAddress;
}


@if (order.IsSuccessed)
{
    <div class="col-lg-12 col-xl-12 col-md-12 col-sm-12">
        <fieldset>
            <legend>اطلاعات فاکتور</legend>
            <div class="form-control">
                <label class="control-label col-md-2">نام نام خانوادگی:</label>
                <div class="col-md-2">
                    @userInfo.FirstName @userInfo.LastName
                </div>
                <label class="control-label col-md-2">شماره تماس:</label>
                <div class="col-md-2">
                    @userInfo.PhoneNumber
                </div>
                <label class="control-label col-md-2">تاریخ ثبت فاکتور:</label>
                <div class="col-md-2">
                    @order.CreateDate.Value.ToPersianDateTextify()
                </div>
            </div>
            <div class="form-control">
                <label class="control-label col-md-2">آدرس:</label>
                <div class="col-md-9">
                    @address.Address
                </div>
            </div>
            <div class="form-control">
                <label class="control-label col-md-2">شماره تماس:</label>
                <div class="col-md-2">
                    @userInfo.PhoneNumber
                </div>
                <label class="control-label col-md-2">تاریخ خرید:</label>
                <div class="col-md-2">
                    @order.SuccessDate.Value.ToPersianDateTextify()
                </div>
                <label class="control-label col-md-2">مبلغ فاکتور:</label>
                <div class="col-md-2">
                    @order.Amount.ToPersianPrice()
                </div>

            </div>

        </fieldset>

    </div>
}

<div class="col-lg-12 col-xl-12 col-md-12 col-sm-12" style="margin-top:20px">
    <fieldset>
        <legend>جزئیات فاکتور</legend>
        <table class="table-first table-condensed table table-responsive tableWrap table-striped rounded table-hover table-bordered ">
            <thead>
                <tr>
                    <th scope="col">ردیف</th>
                    <th scope="col">عنوان کالا</th>
                    <th scope="col">قیمت اصلی کالا</th>
                    <th scope="col">قیمت با تخفیف</th>
                    <th scope="col">مشاهده</th>
                </tr>
                <tr>
                    <form method="get" name="searchForm">
                        <th>
                            ---
                            @*<input  type="checkbox" data-toggle="tooltip" title="انتخاب همه" data-role="confirm">*@

                        </th>
                        <th>
                            ---
                            @*<input type="text" value="@ViewBag.SearchModel.Id" name="Id" class="form-control searchInput" />*@
                        </th>
                        <th> --- </th>


                        <th>
                            ----
                        </th>
                        <th>
                            ----
                        </th>

                        <input type="submit" class="form-control hidden btn btn-success btn-block searchBtn" value="جستجو" />
                    </form>
                </tr>
            </thead>
        </table>
        <div class="bodycontainer scrollable ">
            <table class="table-second table table-hover table-striped table-condensed table-bordered table-scrollable">
                <tbody>



                    @{var index = 1;}
                    @if (Model != null)
                    {

                        foreach (var item in Model)
                        {
                            <tr>

                                <td class="order-code">@(index++)</td>
                                <td>@(item.OrderName ?? item.Product.Title) </td>
                                <td>@(item.OrderPrice ?? item.Product.Price.ToPersianPrice())</td>
                                <td>@(item.OrderPriceDiscount ?? item.Product.PriceWithDiscount.ToPersianPrice())</td>
                                <td>
                                    @if (item.ProductId != null)
                                    {
                                        <a target="_blank" href="http://liftbazar.ir/Product/ProductDetail/@item.Id">
                                            <i class="fa fa-eye" aria-hidden="true"></i>

                                        </a>
                                    }
                                    else
                                    {
                                        <a target="_blank" href="http://liftbazar.ir/Product/PackageDetail/@item.Id">
                                            <i class="fa fa-eye" aria-hidden="true"></i>

                                        </a>
                                    }
                                </td>
                            </tr>
                        }
                    }
                </tbody>
            </table>
        </div>

        <table class="table table-hover table-striped">
            <tfoot>
                <a class="btn btn-danger btn-block" asp-action="Index"> بازگشت</a>
            </tfoot>
        </table>
    </fieldset>

</div>

